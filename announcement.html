<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>게시판</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    /* 배너 영역 */
    #banner img {
      width: 100%;
      height: auto;
    }
    /* 공지사항 제목 스타일 */
    .notice-title {
      font-weight: bold;
      font-size: 24px;
      margin: 20px 0;
    }
    /* 게시글 표 스타일 */
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    /* 관리자 로그인 및 게시글 작성 폼 */
    #adminSection {
      margin-top: 20px;
    }
    #postForm {
      margin-top: 20px;
      display: none; /* 기본은 숨김 처리 */
    }
    #postForm label {
      margin-right: 10px;
    }
    #postForm input,
    #postForm textarea {
      margin-right: 10px;
    }
  </style>
</head>
<body>

  <!-- 배너 영역: src에 원하는 배너 디자인의 URL 또는 코드를 삽입 -->
  <div id="banner">
    <img src="여기에_배너_URL_또는_SRC코드_삽입" alt="배너 디자인">
  </div>

  <!-- 공지사항 제목 -->
  <div class="notice-title">공지사항</div>

  <!-- 게시글 표 -->
  <table id="boardTable">
    <thead>
      <tr>
        <th>작성일</th>
        <th>제목</th>
        <th>NO</th>
      </tr>
    </thead>
    <tbody>
      <!-- 작성된 게시글이 여기에 추가됩니다. -->
    </tbody>
  </table>

  <!-- 관리자 로그인 영역 -->
  <div id="adminSection">
    <button id="loginBtn">작성</button>
  </div>

  <!-- 게시글 작성 폼 (관리자 전용) -->
  <form id="postForm">
    <label for="date">작성일:</label>
    <input type="date" id="date" required>
    <label for="title">제목:</label>
    <input type="text" id="title" placeholder="제목을 입력하세요" required>
    <label for="content">내용:</label>
    <textarea id="content" placeholder="내용을 입력하세요" required></textarea>
    <button type="submit">글 작성</button>
  </form>

  <script>
    // 관리자 로그인 기능 (간단한 예제)
    const adminPassword = "iiuukoda127"; // 관리자 패스워드 (실제 운영환경에서는 서버측 인증을 사용해야 합니다)
    document.getElementById('loginBtn').addEventListener('click', function() {
      const inputPwd = prompt("관리자 패스워드를 입력하세요:");
      if (inputPwd === adminPassword) {
        alert("관리자 로그인 성공!");
        document.getElementById('postForm').style.display = 'block';
        document.getElementById('loginBtn').style.display = 'none';
      } else {
        alert("패스워드가 틀렸습니다.");
      }
    });

    // 게시글 작성 및 테이블 추가 기능
    let postCount = 0;

    // 게시글 추가 함수
    function addPost(postData) {
      // 새 테이블 행 생성
      const newRow = document.createElement('tr');

      // 작성일 셀 생성
      const dateCell = document.createElement('td');
      dateCell.textContent = postData.date;
      newRow.appendChild(dateCell);

      // 제목 셀 생성 (클릭 시 상세 페이지로 이동)
      const titleCell = document.createElement('td');
      const titleLink = document.createElement('a');
      titleLink.href = "detail.html?id=" + postData.id;
      titleLink.textContent = postData.title;
      titleCell.appendChild(titleLink);
      newRow.appendChild(titleCell);

      // NO 셀 생성
      const noCell = document.createElement('td');
      noCell.textContent = postData.id;
      newRow.appendChild(noCell);

      // 테이블의 tbody에 새 행 추가
      document.querySelector('#boardTable tbody').appendChild(newRow);
    }

    document.getElementById('postForm').addEventListener('submit', function(e) {
      e.preventDefault();

      // 폼에서 입력 값 가져오기
      const dateValue = document.getElementById('date').value;
      const titleValue = document.getElementById('title').value;
      const contentValue = document.getElementById('content').value;
      postCount++;

      // 게시글 데이터를 객체로 생성
      const postData = {
        date: dateValue,
        title: titleValue,
        content: contentValue,
        id: postCount
      };

      // 게시글 데이터를 localStorage에 저장 (간단한 저장 방식)
      localStorage.setItem('post_' + postCount, JSON.stringify(postData));

      // 테이블에 새 게시글 추가
      addPost(postData);

      // 폼 초기화
      this.reset();
    });

    // 페이지 로딩 시 기존에 저장된 게시글 불러오기 (옵션)
    window.addEventListener('load', function() {
      // 게시글이 여러 개일 경우 localStorage의 키를 순회하면서 불러옴
      for (let key in localStorage) {
        if (localStorage.hasOwnProperty(key) && key.startsWith('post_')) {
          const postData = JSON.parse(localStorage.getItem(key));
          // 업데이트된 postCount 값 유지
          if (postData.id > postCount) {
            postCount = postData.id;
          }
          addPost(postData);
        }
      }
    });
  </script>

</body>
</html>
